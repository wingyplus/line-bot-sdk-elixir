# SPDX-License-Identifier: Apache-2.0
# SPDX-FileCopyrightText: 2026 Thanabodee Charoenpiriyakij

# NOTE: This file is auto generated by OpenAPI Generator unset (https://openapi-generator.tech).
# Do not edit this file manually.

defmodule LINEBotSDK.ManageAudience do
  @moduledoc """
  API calls for all endpoints tagged `ManageAudience`.
  """

  alias LINEBotSDK.Deserializer

  @doc """
  Add user IDs or Identifiers for Advertisers (IFAs) to an audience for uploading user IDs (by JSON)

  ### Parameters

  - `client` (Req.Request.t()): Client to make request with
  - `add_audience_to_audience_group_request` (AddAudienceToAudienceGroupRequest): 
  - `client_opts` (keyword): Options to pass to `Req.request`

  ### Returns

  - `{:ok, nil}` on success
  - `{:error, Req.Response.t()}` on failure
  """
  def add_audience_to_audience_group(
        client,
        add_audience_to_audience_group_request,
        client_opts \\ []
      ) do
    request_opts = [
      method: :put,
      url: "/v2/bot/audienceGroup/upload",
      json: add_audience_to_audience_group_request
    ]

    client
    |> Req.request(Keyword.merge(request_opts, client_opts))
    |> Deserializer.evaluate_response([
      {202, false}
    ])
  end

  @doc """
  Create audience for uploading user IDs (by JSON)

  ### Parameters

  - `client` (Req.Request.t()): Client to make request with
  - `create_audience_group_request` (CreateAudienceGroupRequest): 
  - `client_opts` (keyword): Options to pass to `Req.request`

  ### Returns

  - `{:ok, LINEBotSDK.Model.CreateAudienceGroupResponse.t}` on success
  - `{:error, Req.Response.t()}` on failure
  """
  def create_audience_group(client, create_audience_group_request, client_opts \\ []) do
    request_opts = [
      method: :post,
      url: "/v2/bot/audienceGroup/upload",
      json: create_audience_group_request
    ]

    client
    |> Req.request(Keyword.merge(request_opts, client_opts))
    |> Deserializer.evaluate_response([
      {202, LINEBotSDK.ManageAudience.Model.CreateAudienceGroupResponse}
    ])
  end

  @doc """
  Create audience for click-based retargeting

  ### Parameters

  - `client` (Req.Request.t()): Client to make request with
  - `create_click_based_audience_group_request` (CreateClickBasedAudienceGroupRequest): 
  - `client_opts` (keyword): Options to pass to `Req.request`

  ### Returns

  - `{:ok, LINEBotSDK.Model.CreateClickBasedAudienceGroupResponse.t}` on success
  - `{:error, Req.Response.t()}` on failure
  """
  def create_click_based_audience_group(
        client,
        create_click_based_audience_group_request,
        client_opts \\ []
      ) do
    request_opts = [
      method: :post,
      url: "/v2/bot/audienceGroup/click",
      json: create_click_based_audience_group_request
    ]

    client
    |> Req.request(Keyword.merge(request_opts, client_opts))
    |> Deserializer.evaluate_response([
      {202, LINEBotSDK.ManageAudience.Model.CreateClickBasedAudienceGroupResponse}
    ])
  end

  @doc """
  Create audience for impression-based retargeting

  ### Parameters

  - `client` (Req.Request.t()): Client to make request with
  - `create_imp_based_audience_group_request` (CreateImpBasedAudienceGroupRequest): 
  - `client_opts` (keyword): Options to pass to `Req.request`

  ### Returns

  - `{:ok, LINEBotSDK.Model.CreateImpBasedAudienceGroupResponse.t}` on success
  - `{:error, Req.Response.t()}` on failure
  """
  def create_imp_based_audience_group(
        client,
        create_imp_based_audience_group_request,
        client_opts \\ []
      ) do
    request_opts = [
      method: :post,
      url: "/v2/bot/audienceGroup/imp",
      json: create_imp_based_audience_group_request
    ]

    client
    |> Req.request(Keyword.merge(request_opts, client_opts))
    |> Deserializer.evaluate_response([
      {202, LINEBotSDK.ManageAudience.Model.CreateImpBasedAudienceGroupResponse}
    ])
  end

  @doc """
  Delete audience

  ### Parameters

  - `client` (Req.Request.t()): Client to make request with
  - `audience_group_id` (integer()): The audience ID.
  - `client_opts` (keyword): Options to pass to `Req.request`

  ### Returns

  - `{:ok, nil}` on success
  - `{:error, Req.Response.t()}` on failure
  """
  def delete_audience_group(client, audience_group_id, client_opts \\ []) do
    request_opts = [
      method: :delete,
      url: "/v2/bot/audienceGroup/:audience_group_id",
      path_params: [audience_group_id: audience_group_id]
    ]

    client
    |> Req.request(Keyword.merge(request_opts, client_opts))
    |> Deserializer.evaluate_response([
      {200, false}
    ])
  end

  @doc """
  Gets audience data.

  ### Parameters

  - `client` (Req.Request.t()): Client to make request with
  - `audience_group_id` (integer()): The audience ID.
  - `client_opts` (keyword): Options to pass to `Req.request`

  ### Returns

  - `{:ok, LINEBotSDK.Model.GetAudienceDataResponse.t}` on success
  - `{:error, Req.Response.t()}` on failure
  """
  def get_audience_data(client, audience_group_id, client_opts \\ []) do
    request_opts = [
      method: :get,
      url: "/v2/bot/audienceGroup/:audience_group_id",
      path_params: [audience_group_id: audience_group_id]
    ]

    client
    |> Req.request(Keyword.merge(request_opts, client_opts))
    |> Deserializer.evaluate_response([
      {200, LINEBotSDK.ManageAudience.Model.GetAudienceDataResponse},
      {400, LINEBotSDK.ManageAudience.Model.ErrorResponse}
    ])
  end

  @doc """
  Gets data for more than one audience.

  ### Parameters

  - `client` (Req.Request.t()): Client to make request with
  - `page` (integer()): The page to return when getting (paginated) results. Must be 1 or higher.
  - `optional_args` (keyword): Optional parameters
    - `:description` (String.t): The name of the audience(s) to return. You can search for partial matches. This is case-insensitive, meaning AUDIENCE and audience are considered identical. If omitted, the name of the audience(s) will not be used as a search criterion. 
    - `:status` (AudienceGroupStatus): The status of the audience(s) to return. If omitted, the status of the audience(s) will not be used as a search criterion. 
    - `:size` (integer()): The number of audiences per page. Default: 20 Max: 40 
    - `:includes_external_public_groups` (boolean()): true (default): Get public audiences created in all channels linked to the same bot. false: Get audiences created in the same channel. 
    - `:create_route` (AudienceGroupCreateRoute): How the audience was created. If omitted, all audiences are included.  `OA_MANAGER`: Return only audiences created with LINE Official Account Manager (opens new window). `MESSAGING_API`: Return only audiences created with Messaging API. 
  - `client_opts` (keyword): Options to pass to `Req.request`

  ### Returns

  - `{:ok, LINEBotSDK.Model.GetAudienceGroupsResponse.t}` on success
  - `{:error, Req.Response.t()}` on failure
  """
  def get_audience_groups(client, page, optional_args \\ [], client_opts \\ []) do
    description = Keyword.get(optional_args, :description)
    status = Keyword.get(optional_args, :status)
    size = Keyword.get(optional_args, :size)
    includes_external_public_groups = Keyword.get(optional_args, :includes_external_public_groups)
    create_route = Keyword.get(optional_args, :create_route)

    request_opts = [
      method: :get,
      url: "/v2/bot/audienceGroup/list",
      params:
        Enum.reject(
          [
            {"page", page},
            {"description", description},
            {"status", status},
            {"size", size},
            {"includesExternalPublicGroups", includes_external_public_groups},
            {"createRoute", create_route}
          ],
          fn {_, v} -> is_nil(v) end
        )
    ]

    client
    |> Req.request(Keyword.merge(request_opts, client_opts))
    |> Deserializer.evaluate_response([
      {200, LINEBotSDK.ManageAudience.Model.GetAudienceGroupsResponse}
    ])
  end

  @doc """
  Gets audience data.

  ### Parameters

  - `client` (Req.Request.t()): Client to make request with
  - `audience_group_id` (integer()): The audience ID.
  - `client_opts` (keyword): Options to pass to `Req.request`

  ### Returns

  - `{:ok, LINEBotSDK.Model.GetSharedAudienceDataResponse.t}` on success
  - `{:error, Req.Response.t()}` on failure
  """
  def get_shared_audience_data(client, audience_group_id, client_opts \\ []) do
    request_opts = [
      method: :get,
      url: "/v2/bot/audienceGroup/shared/:audience_group_id",
      path_params: [audience_group_id: audience_group_id]
    ]

    client
    |> Req.request(Keyword.merge(request_opts, client_opts))
    |> Deserializer.evaluate_response([
      {200, LINEBotSDK.ManageAudience.Model.GetSharedAudienceDataResponse},
      {400, LINEBotSDK.ManageAudience.Model.ErrorResponse}
    ])
  end

  @doc """
  Gets data for more than one audience, including those shared by the Business Manager.

  ### Parameters

  - `client` (Req.Request.t()): Client to make request with
  - `page` (integer()): The page to return when getting (paginated) results. Must be 1 or higher.
  - `optional_args` (keyword): Optional parameters
    - `:description` (String.t): The name of the audience(s) to return. You can search for partial matches. This is case-insensitive, meaning AUDIENCE and audience are considered identical. If omitted, the name of the audience(s) will not be used as a search criterion. 
    - `:status` (AudienceGroupStatus): The status of the audience(s) to return. If omitted, the status of the audience(s) will not be used as a search criterion. 
    - `:size` (integer()): The number of audiences per page. Default: 20 Max: 40 
    - `:create_route` (AudienceGroupCreateRoute): How the audience was created. If omitted, all audiences are included.  `OA_MANAGER`: Return only audiences created with LINE Official Account Manager (opens new window). `MESSAGING_API`: Return only audiences created with Messaging API. 
    - `:includes_owned_audience_groups` (boolean()): true: Include audienceGroups owned by LINE Official Account Manager false: Respond only audienceGroups shared by Business Manager 
  - `client_opts` (keyword): Options to pass to `Req.request`

  ### Returns

  - `{:ok, LINEBotSDK.Model.GetSharedAudienceGroupsResponse.t}` on success
  - `{:error, Req.Response.t()}` on failure
  """
  def get_shared_audience_groups(client, page, optional_args \\ [], client_opts \\ []) do
    description = Keyword.get(optional_args, :description)
    status = Keyword.get(optional_args, :status)
    size = Keyword.get(optional_args, :size)
    create_route = Keyword.get(optional_args, :create_route)
    includes_owned_audience_groups = Keyword.get(optional_args, :includes_owned_audience_groups)

    request_opts = [
      method: :get,
      url: "/v2/bot/audienceGroup/shared/list",
      params:
        Enum.reject(
          [
            {"page", page},
            {"description", description},
            {"status", status},
            {"size", size},
            {"createRoute", create_route},
            {"includesOwnedAudienceGroups", includes_owned_audience_groups}
          ],
          fn {_, v} -> is_nil(v) end
        )
    ]

    client
    |> Req.request(Keyword.merge(request_opts, client_opts))
    |> Deserializer.evaluate_response([
      {200, LINEBotSDK.ManageAudience.Model.GetSharedAudienceGroupsResponse}
    ])
  end

  @doc """
  Renames an existing audience.

  ### Parameters

  - `client` (Req.Request.t()): Client to make request with
  - `audience_group_id` (integer()): The audience ID.
  - `update_audience_group_description_request` (UpdateAudienceGroupDescriptionRequest): 
  - `client_opts` (keyword): Options to pass to `Req.request`

  ### Returns

  - `{:ok, nil}` on success
  - `{:error, Req.Response.t()}` on failure
  """
  def update_audience_group_description(
        client,
        audience_group_id,
        update_audience_group_description_request,
        client_opts \\ []
      ) do
    request_opts = [
      method: :put,
      url: "/v2/bot/audienceGroup/:audience_group_id/updateDescription",
      path_params: [audience_group_id: audience_group_id],
      json: update_audience_group_description_request
    ]

    client
    |> Req.request(Keyword.merge(request_opts, client_opts))
    |> Deserializer.evaluate_response([
      {200, false}
    ])
  end
end
